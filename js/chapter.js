const saved=(new Date).toISOString(),historyItems=localStorage.getItem("histories");if(historyItems){const e=JSON.parse(historyItems),t=e.map(((e,t)=>({...e,index:t}))).filter((e=>e.id===currentId));0===t.length?(e.push({id:currentId,title:currentKomik,link:currentLink,lastChapter:latest,lastchapterlink:currentChapter,saved}),localStorage.setItem("histories",JSON.stringify(e))):(e.splice(t[0].index,1),e.push({id:currentId,title:currentKomik,link:currentLink,lastChapter:latest,lastchapterlink:currentChapter,saved}),localStorage.setItem("histories",JSON.stringify(e)))}else{const e=[];e.push({id:currentId,title:currentKomik,link:currentLink,lastChapter:latest,lastchapterlink:currentChapter,saved}),localStorage.setItem("histories",JSON.stringify(e))}const vch=JSON.parse(localStorage.getItem("visited-chapters")),idch=chapterID||void 0;if(vch)if(0===vch.length)localStorage.setItem("visited-chapters",JSON.stringify([chapterID]));else{let e;e=vch.filter((e=>e===chapterID)),(e||0===e.length)&&(vch.push(chapterID),localStorage.setItem("visited-chapters",JSON.stringify(vch)))}else localStorage.setItem("visited-chapters",JSON.stringify([chapterID]));